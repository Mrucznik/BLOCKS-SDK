<!-- HTML header for doxygen 1.8.12-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>The BLOCKS SDK: BlocksDrawing</title>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">The BLOCKS SDK
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('example_blocks_drawing.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">BlocksDrawing </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="blocks_drawing_introduction"></a>
Introduction</h1>
<p>BlocksDrawing is a JUCE application that allows you to use your Lightpad as a drawing surface. You can choose from a palette of 9 base colours and paint them on the 15x15 LED grid, blending between colours using touch pressure.</p>
<p>Generate a Projucer project from the file located in the <code class="filename">examples/</code> folder, then navigate to the <code class="filename">BlocksDrawingDemo/Builds/</code> directory and open the code project in your IDE of choice. Run the application and connect your Lightpad (if you do not know how to do this, see <a class="el" href="connecting_blocks.html">Connecting BLOCKS</a>) - it should now display a 3x3 grid of colours to choose from. Touch a colour to set it as the current brush colour and then press the mode button to switch to canvas mode where you will be presented with a blank touch surface. Touch anywhere on the LED grid to start painting and use the pressure of your touch to control how bright the colour is. Try painting over an already painted LED to increase its brightness and blend between different colours by doing this with a different brush colour. To clear the canvas and start over, double-click the mode button.</p>
<p>The concept of a BLOCKS topology and the methods for receiving callbacks from a <a class="el" href="classBlock.html" title="Represents an individual BLOCKS device.">Block</a> object are covered in the <a class="el" href="example_blocks_monitor.html">BlocksMonitor</a> example and this tutorial will cover the methods in the API for displaying grids and setting LEDs on the Lightpad.</p>
<h1><a class="anchor" id="blocks_drawing_led_grid"></a>
The LEDGrid Object</h1>
<p>Lightpads have a 15x15 LED grid which can be accessed and controlled through the <a class="el" href="classLEDGrid.html" title="Represents a 2D grid of LEDs on a block device.">LEDGrid</a> object, a pointer to which is returned by the <a class="el" href="classBlock.html#a6b5061298a0a23598edc5c204ff0458c" title="If this block has a grid of LEDs, this will return an object to control it.">Block::getLEDGrid()</a> method <span class="comment">[1]</span> (for more details on how the LEDGrid object operates, see <a class="el" href="controlling_led_grids.html">Controlling LED grids</a>).</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> topologyChanged()<span class="keyword"> override</span></div>
<div class="line"><span class="keyword"></span>{</div>
<div class="line">    <span class="comment">//...</span></div>
<div class="line">    <span class="keyword">auto</span> blocks = topologySource.getCurrentTopology().blocks;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> b : blocks)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (b-&gt;getType() == Block::Type::lightPadBlock)</div>
<div class="line">        {</div>
<div class="line">            activeBlock = b;</div>
<div class="line"> </div>
<div class="line">            <span class="comment">//...</span></div>
<div class="line">            <span class="keywordflow">if</span> (<span class="keyword">auto</span> grid = activeBlock-&gt;getLEDGrid()) <span class="comment">// [1]</span></div>
<div class="line">            {</div>
<div class="line">                <span class="comment">//...</span></div>
<div class="line">                setLEDProgram (*activeBlock);          <span class="comment">// [2]</span></div>
<div class="line">            }</div>
<div class="line">            <span class="comment">//...</span></div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>In the <code class="project_code">topologyChanged()</code> method of <code class="project_code">BlocksDrawingDemo</code> this LEDGrid pointer is passed to the <code class="project_code">setLEDProgram()</code> method <span class="comment">[2]</span>, which sets the <a class="el" href="structBlock_1_1Program.html" title="A program that can be loaded onto a block.">Block::Program</a> to either a <a class="el" href="structDrumPadGridProgram.html">DrumPadGridProgram</a> <span class="comment">[3]</span> or a <a class="el" href="structBitmapLEDProgram.html" title="A simple Program to set the colours of individual LEDs.">BitmapLEDProgram</a> <span class="comment">[4]</span>, depending on the selected mode.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> setLEDProgram (<a class="code" href="classBlock.html">Block</a>&amp; block)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (currentMode == canvas)</div>
<div class="line">    {</div>
<div class="line">        block.<a class="code" href="classBlock.html#ad8951bbdae475bfea2d9b28bb3688d0e">setProgram</a> (<span class="keyword">new</span> <a class="code" href="structBitmapLEDProgram.html">BitmapLEDProgram</a> (block));   <span class="comment">// [4]</span></div>
<div class="line">        <span class="comment">//...</span></div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (currentMode == colourPalette)</div>
<div class="line">    {</div>
<div class="line">        block.<a class="code" href="classBlock.html#ad8951bbdae475bfea2d9b28bb3688d0e">setProgram</a> (<span class="keyword">new</span> <a class="code" href="structDrumPadGridProgram.html">DrumPadGridProgram</a> (block)); <span class="comment">// [3]</span></div>
<div class="line">        <span class="comment">//...</span></div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="aclassBlock_html"><div class="ttname"><a href="classBlock.html">Block</a></div><div class="ttdoc">Represents an individual BLOCKS device.</div><div class="ttdef"><b>Definition:</b> roli_Block.h:31</div></div>
<div class="ttc" id="aclassBlock_html_ad8951bbdae475bfea2d9b28bb3688d0e"><div class="ttname"><a href="classBlock.html#ad8951bbdae475bfea2d9b28bb3688d0e">Block::setProgram</a></div><div class="ttdeci">virtual juce::Result setProgram(std::unique_ptr&lt; Program &gt;, ProgramPersistency persistency=ProgramPersistency::setAsTemp)=0</div><div class="ttdoc">Sets the Program to run on this block.</div></div>
<div class="ttc" id="astructBitmapLEDProgram_html"><div class="ttname"><a href="structBitmapLEDProgram.html">BitmapLEDProgram</a></div><div class="ttdoc">A simple Program to set the colours of individual LEDs.</div><div class="ttdef"><b>Definition:</b> roli_BitmapLEDProgram.h:31</div></div>
<div class="ttc" id="astructDrumPadGridProgram_html"><div class="ttname"><a href="structDrumPadGridProgram.html">DrumPadGridProgram</a></div><div class="ttdef"><b>Definition:</b> roli_DrumPadLEDProgram.h:29</div></div>
</div><!-- fragment --><h1><a class="anchor" id="blocks_drawing_colour_palette"></a>
Colour Palette</h1>
<p>In the colour palette mode the Lightpad displays a 3x3 grid of colours, constructed using the DrumPadGridProgram class. A DrumPadGridProgram pointer is retrieved by calling the <code class="project_code">getPaletteProgram()</code> helper function of <code class="project_code">BlocksDrawingDemo</code> and in the <code class="project_code">BlocksDrawingDemo::setLEDProgram()</code> method the Block::Program is set to point to a new DrumPadGridProgram object and is passed the Block object of the Lightpad in its constructor.</p>
<div class="fragment"><div class="line"><a class="code" href="structDrumPadGridProgram.html">DrumPadGridProgram</a>* getPaletteProgram()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (activeBlock != <span class="keyword">nullptr</span>)</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">dynamic_cast&lt;</span><a class="code" href="structDrumPadGridProgram.html">DrumPadGridProgram</a>*<span class="keyword">&gt;</span> (activeBlock-&gt;getProgram());</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line">}</div>
</div><!-- fragment --><p>After the program has been initialised, it is passed to the <a class="el" href="classLEDGrid.html" title="Represents a 2D grid of LEDs on a block device.">LEDGrid</a> to display using the <a class="el" href="classBlock.html#ad8951bbdae475bfea2d9b28bb3688d0e" title="Sets the Program to run on this block.">Block::setProgram()</a> method and the layout of the grid is set up using the <a class="el" href="structDrumPadGridProgram.html#a00dff0bc8385c3ab4c0d14734bc17ed3">DrumPadGridProgram::setGridFills()</a> method. This function takes 3 arguments: the number of rows, number of columns and an array of <a class="el" href="structDrumPadGridProgram_1_1GridFill.html" title="Set how each pad in the grid looks.">DrumPadGridProgram::GridFill</a> objects containing a <code class="project_code">GridFill</code> for each pad that controls its colour and fill type.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> setLEDProgram (<a class="code" href="classBlock.html">Block</a>&amp; block)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">//...</span></div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (currentMode == colourPalette)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">//...</span></div>
<div class="line">        <span class="keywordflow">if</span> (<span class="keyword">auto</span>* program = getPaletteProgram())</div>
<div class="line">            program-&gt;setGridFills (layout.numColumns, layout.numRows, layout.gridFillArray);</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>The <code class="project_code">ColourGrid</code> struct contains all of this information and handles the construction of the <code class="project_code">GridFill</code> array in the <code class="project_code">ColourGrid::constructGridFillArray()</code> method.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> constructGridFillArray()</div>
<div class="line">{</div>
<div class="line">    gridFillArray.clear();</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> counter = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 0; i &lt; numColumns; ++i)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keyword">auto</span> j = 0; j &lt; numRows; ++j)</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="structDrumPadGridProgram_1_1GridFill.html">DrumPadGridProgram::GridFill</a> fill;</div>
<div class="line">            Colour colourToUse = colourArray.getUnchecked (counter);</div>
<div class="line"> </div>
<div class="line">            fill.<a class="code" href="structDrumPadGridProgram_1_1GridFill.html#a8209446ba4218dbc59e899bf8e29107b">colour</a> = colourToUse.withBrightness (colourToUse == currentColour ? 1.0f : 0.1f);</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (colourToUse == Colours::black)</div>
<div class="line">                fill.<a class="code" href="structDrumPadGridProgram_1_1GridFill.html#a4ee0f13cd4b8f02d3e909d681a24194b">fillType</a> = DrumPadGridProgram::GridFill::FillType::hollow;</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                fill.<a class="code" href="structDrumPadGridProgram_1_1GridFill.html#a4ee0f13cd4b8f02d3e909d681a24194b">fillType</a> = DrumPadGridProgram::GridFill::FillType::filled;</div>
<div class="line"> </div>
<div class="line">            gridFillArray.add (fill);</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (++counter == colourArray.size())</div>
<div class="line">                counter = 0;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="astructDrumPadGridProgram_1_1GridFill_html"><div class="ttname"><a href="structDrumPadGridProgram_1_1GridFill.html">DrumPadGridProgram::GridFill</a></div><div class="ttdoc">Set how each pad in the grid looks.</div><div class="ttdef"><b>Definition:</b> roli_DrumPadLEDProgram.h:57</div></div>
<div class="ttc" id="astructDrumPadGridProgram_1_1GridFill_html_a4ee0f13cd4b8f02d3e909d681a24194b"><div class="ttname"><a href="structDrumPadGridProgram_1_1GridFill.html#a4ee0f13cd4b8f02d3e909d681a24194b">DrumPadGridProgram::GridFill::fillType</a></div><div class="ttdeci">FillType fillType</div><div class="ttdef"><b>Definition:</b> roli_DrumPadLEDProgram.h:73</div></div>
<div class="ttc" id="astructDrumPadGridProgram_1_1GridFill_html_a8209446ba4218dbc59e899bf8e29107b"><div class="ttname"><a href="structDrumPadGridProgram_1_1GridFill.html#a8209446ba4218dbc59e899bf8e29107b">DrumPadGridProgram::GridFill::colour</a></div><div class="ttdeci">LEDColour colour</div><div class="ttdef"><b>Definition:</b> roli_DrumPadLEDProgram.h:72</div></div>
</div><!-- fragment --><p>An instance of this object called <code class="project_code">layout</code> is declared as a member variable of <code class="project_code">BlocksDrawingDemo</code> to easily change how the grid looks.</p>
<div class="fragment"><div class="line">ColourGrid layout { 3, 3 };</div>
</div><!-- fragment --><p>The <code class="project_code">ColourGrid::setActiveColourForTouch()</code> method is called in the <code class="project_code">BlocksDrawingDemo::touchChanged()</code> callback and is used to determine which brush colour has been selected based on a Touch coordinate from the Lightpad.</p>
<div class="fragment"><div class="line"><span class="keywordtype">bool</span> setActiveColourForTouch (<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">auto</span> colourHasChanged = <span class="keyword">false</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> xindex = x / 5;</div>
<div class="line">    <span class="keyword">auto</span> yindex = y / 5;</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> newColour = colourArray.getUnchecked ((yindex * 3) + xindex);</div>
<div class="line">    <span class="keywordflow">if</span> (currentColour != newColour)</div>
<div class="line">    {</div>
<div class="line">        currentColour = newColour;</div>
<div class="line">        constructGridFillArray();</div>
<div class="line">        colourHasChanged = <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> colourHasChanged;</div>
<div class="line">}</div>
</div><!-- fragment --><p>When the application is run, the colour palette mode would look like this:</p>
<div class="image">
<img src="BlocksDrawing_palette.JPG" alt=""/>
<div class="caption">
Colour palette mode</div></div>
<h1><a class="anchor" id="blocks_drawing_canvas"></a>
Canvas</h1>
<p>In canvas mode, the Block program is set to an instance of BitmapLEDProgram and uses the <a class="el" href="structBitmapLEDProgram.html#adf520f46797d6ea4ccaaaf62d3e7e7e4" title="Set the colour of the LED at coordinates {x, y}.">BitmapLEDProgram::setLED()</a> method to set individual LEDs on the Lightpad to a particular colour. The <code class="project_code">ActiveLED</code> struct declared in the private section of <code class="project_code">BlocksDrawingDemo</code> is used to keep track of which LEDs are on and their colour and brightness. <code class="project_code">BlocksDrawingDemo</code> contains an Array of these objects called <code class="project_code">activeLeds</code>.</p>
<div class="fragment"><div class="line"><span class="keyword">struct </span>ActiveLED</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="namespacelittlefoot.html#a417dab5137c6d4ff4e23303f84099aa9">uint32</a> x, y;</div>
<div class="line">    Colour colour;</div>
<div class="line">    <span class="keywordtype">float</span> <a class="code" href="namespaceroli_1_1BlocksProtocol.html#a35bcaacfb91f45aa42a778527621f8c4a9280fed36b85badc13eed95ed88c9941">brightness</a>;</div>
<div class="line">    <span class="comment">//...</span></div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">Array&lt;ActiveLED&gt; activeLeds;</div>
<div class="ttc" id="anamespacelittlefoot_html_a417dab5137c6d4ff4e23303f84099aa9"><div class="ttname"><a href="namespacelittlefoot.html#a417dab5137c6d4ff4e23303f84099aa9">littlefoot::uint32</a></div><div class="ttdeci">unsigned int uint32</div><div class="ttdef"><b>Definition:</b> roli_LittleFootRunner.h:48</div></div>
<div class="ttc" id="anamespaceroli_1_1BlocksProtocol_html_a35bcaacfb91f45aa42a778527621f8c4a9280fed36b85badc13eed95ed88c9941"><div class="ttname"><a href="namespaceroli_1_1BlocksProtocol.html#a35bcaacfb91f45aa42a778527621f8c4a9280fed36b85badc13eed95ed88c9941">roli::BlocksProtocol::brightness</a></div><div class="ttdeci">@ brightness</div><div class="ttdef"><b>Definition:</b> roli_BlockConfigId.h:72</div></div>
</div><!-- fragment --><p>In the <code class="project_code">BlocksDrawingDemo::setLEDProgram()</code> method the program is set up and passed to the LEDGrid object the same way as in the colour palette mode but the <code class="project_code">BlocksDrawingDemo::redrawLEDs()</code> method is also called which iterates over the <code class="project_code">activeLeds</code> array and sets the appropriate LEDs on the Lightpad so the LED states persist between mode switches.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> redrawLEDs()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (<span class="keyword">auto</span>* canvasProgram = getCanvasProgram())</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keyword">auto</span> led : activeLeds)</div>
<div class="line">        {</div>
<div class="line">            canvasProgram-&gt;setLED (led.x, led.y, led.colour.withBrightness (led.brightness));</div>
<div class="line">            lightpadComponent.setLEDColour (led.x, led.y, led.colour.withBrightness (led.brightness));</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>When a Touch is received in the <code class="project_code">BlocksDrawingDemo::touchChanged()</code> callback the <code class="project_code">BlocksDrawingDemo::drawLEDs()</code> method is called with 4 arguments: x and y coordinates, touch pressure and brush colour. This method iterates over the <code class="project_code">activeLed</code> array and checks to see if there is an active LED at the given coordinate. If it is blank, an <code class="project_code">ActiveLED</code> object is created and added to the array with the given coordinates and colour using touch pressure for brightness. If there is already an active LED at the coordinate, the colour of that LED will be blended with the current brush colour, the proportion of which is determined by the touch pressure.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> drawLED (<a class="code" href="namespacelittlefoot.html#a417dab5137c6d4ff4e23303f84099aa9">uint32</a> x0, <a class="code" href="namespacelittlefoot.html#a417dab5137c6d4ff4e23303f84099aa9">uint32</a> y0, <span class="keywordtype">float</span> z, Colour drawColour)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (<span class="keyword">auto</span>* canvasProgram = getCanvasProgram())</div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">auto</span> index = getLEDAt (x0, y0);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (drawColour == Colours::black)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (index &gt;= 0)</div>
<div class="line">            {</div>
<div class="line">                canvasProgram-&gt;setLED (x0, y0, Colours::black);</div>
<div class="line">                lightpadComponent.setLEDColour (x0, y0, Colours::black);</div>
<div class="line">                activeLeds.remove (index);</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (index &lt; 0)</div>
<div class="line">        {</div>
<div class="line">            ActiveLED led;</div>
<div class="line">            led.x = x0;</div>
<div class="line">            led.y = y0;</div>
<div class="line">            led.colour = drawColour;</div>
<div class="line">            led.brightness = z;</div>
<div class="line"> </div>
<div class="line">            activeLeds.add (led);</div>
<div class="line">            canvasProgram-&gt;setLED (led.x, led.y, led.colour.withBrightness (led.brightness));</div>
<div class="line"> </div>
<div class="line">            lightpadComponent.setLEDColour (led.x, led.y, led.colour.withBrightness (led.brightness));</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">auto</span> currentLed = activeLeds.getReference (index);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (currentLed.colour == drawColour)</div>
<div class="line">            currentLed.brightness = jmin (currentLed.brightness + z, 1.0f);</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">            currentLed.colour = currentLed.colour.interpolatedWith (drawColour, z);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (canvasProgram != <span class="keyword">nullptr</span>)</div>
<div class="line">            canvasProgram-&gt;setLED (currentLed.x, currentLed.y, currentLed.colour.withBrightness (currentLed.brightness));</div>
<div class="line"> </div>
<div class="line">        lightpadComponent.setLEDColour (currentLed.x, currentLed.y, currentLed.colour.withBrightness (currentLed.brightness));</div>
<div class="line"> </div>
<div class="line">        activeLeds.set (index, currentLed);</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>When the application is run, the canvas mode would look like this:</p>
<div class="image">
<img src="BlocksDrawing_canvas.JPG" alt=""/>
<div class="caption">
Unleash your inner Picasso!</div></div>
<h1><a class="anchor" id="blocks_drawing_summary"></a>
Summary</h1>
<p>This tutorial and the accompanying code project have introduced the LEDGrid object and shown how to use the Block::Program object to display basic grids and set individual LEDs on the Lightpad.</p>
<h1><a class="anchor" id="blocks_drawing_see_also"></a>
See also</h1>
<ul>
<li><a class="el" href="example_blocks_monitor.html">BlocksMonitor</a></li>
<li><a class="el" href="example_blocks_synth.html">BlocksSynth</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<hr class="footer"/>
<address class="footer"><small>All content &copy ROLI Ltd.</small></address><br/>
</body>
</html>
