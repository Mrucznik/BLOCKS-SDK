<!-- HTML header for doxygen 1.8.12-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>The BLOCKS SDK: The BitmapLEDProgram class</title>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">The BLOCKS SDK
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('example_bitmap_led_program.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">The BitmapLEDProgram class </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="littlefoot_example"></a>
A LittleFoot example</h1>
<p>The BitmapLEDProgram class is a simple example of a LittleFoot program.</p>
<p><code class="filename">roli_blocks_basics/visualisers/roli_BitmapLEDProgram.h</code> </p><div class="fragment"><div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">  ==============================================================================</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   Copyright (c) 2020 - ROLI Ltd</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   Permission to use, copy, modify, and/or distribute this software for any</span></div>
<div class="line"><span class="comment">   purpose with or without fee is hereby granted, provided that the above</span></div>
<div class="line"><span class="comment">   copyright notice and this permission notice appear in all copies.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   THE SOFTWARE IS PROVIDED “AS IS” AND ROLI LTD DISCLAIMS ALL WARRANTIES WITH</span></div>
<div class="line"><span class="comment">   REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY</span></div>
<div class="line"><span class="comment">   AND FITNESS. IN NO EVENT SHALL ROLI LTD BE LIABLE FOR ANY SPECIAL, DIRECT,</span></div>
<div class="line"><span class="comment">   INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM</span></div>
<div class="line"><span class="comment">   LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE</span></div>
<div class="line"><span class="comment">   OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR</span></div>
<div class="line"><span class="comment">   PERFORMANCE OF THIS SOFTWARE.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">  ==============================================================================</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">namespace </span><a class="code" href="namespaceroli.html">roli</a></div>
<div class="line">{</div>
<div class="line"> </div>
<div class="line"><span class="keyword">struct </span><a class="code" href="structBitmapLEDProgram.html">BitmapLEDProgram</a>   : <span class="keyword">public</span> <a class="code" href="structBlock_1_1Program.html">Block::Program</a></div>
<div class="line">{</div>
<div class="line">    <a class="code" href="structBitmapLEDProgram.html">BitmapLEDProgram</a> (<a class="code" href="classBlock.html">Block</a>&amp;);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> setLED (<a class="code" href="namespacelittlefoot.html#a417dab5137c6d4ff4e23303f84099aa9">juce::uint32</a> x, <a class="code" href="namespacelittlefoot.html#a417dab5137c6d4ff4e23303f84099aa9">juce::uint32</a> y, <a class="code" href="structLEDColour.html">LEDColour</a>);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    juce::String getLittleFootProgram() <span class="keyword">override</span>;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">} <span class="comment">// namespace roli</span></div>
<div class="ttc" id="aclassBlock_html"><div class="ttname"><a href="classBlock.html">Block</a></div><div class="ttdoc">Represents an individual BLOCKS device.</div><div class="ttdef"><b>Definition:</b> roli_Block.h:31</div></div>
<div class="ttc" id="anamespacelittlefoot_html_a417dab5137c6d4ff4e23303f84099aa9"><div class="ttname"><a href="namespacelittlefoot.html#a417dab5137c6d4ff4e23303f84099aa9">littlefoot::uint32</a></div><div class="ttdeci">unsigned int uint32</div><div class="ttdef"><b>Definition:</b> roli_LittleFootRunner.h:48</div></div>
<div class="ttc" id="anamespaceroli_html"><div class="ttname"><a href="namespaceroli.html">roli</a></div><div class="ttdef"><b>Definition:</b> roli_BlockConfigId.h:28</div></div>
<div class="ttc" id="astructBitmapLEDProgram_html"><div class="ttname"><a href="structBitmapLEDProgram.html">BitmapLEDProgram</a></div><div class="ttdoc">A simple Program to set the colours of individual LEDs.</div><div class="ttdef"><b>Definition:</b> roli_BitmapLEDProgram.h:31</div></div>
<div class="ttc" id="astructBlock_1_1Program_html"><div class="ttname"><a href="structBlock_1_1Program.html">Block::Program</a></div><div class="ttdoc">A program that can be loaded onto a block.</div><div class="ttdef"><b>Definition:</b> roli_Block.h:242</div></div>
<div class="ttc" id="astructLEDColour_html"><div class="ttname"><a href="structLEDColour.html">LEDColour</a></div><div class="ttdoc">A simple ARGB colour class for setting LEDs.</div><div class="ttdef"><b>Definition:</b> roli_LEDGrid.h:31</div></div>
</div><!-- fragment --><p><code class="filename">roli_blocks_basics/visualisers/roli_BitmapLEDProgram.cpp</code> </p><div class="fragment"><div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">  ==============================================================================</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   Copyright (c) 2020 - ROLI Ltd</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   Permission to use, copy, modify, and/or distribute this software for any</span></div>
<div class="line"><span class="comment">   purpose with or without fee is hereby granted, provided that the above</span></div>
<div class="line"><span class="comment">   copyright notice and this permission notice appear in all copies.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   THE SOFTWARE IS PROVIDED “AS IS” AND ROLI LTD DISCLAIMS ALL WARRANTIES WITH</span></div>
<div class="line"><span class="comment">   REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY</span></div>
<div class="line"><span class="comment">   AND FITNESS. IN NO EVENT SHALL ROLI LTD BE LIABLE FOR ANY SPECIAL, DIRECT,</span></div>
<div class="line"><span class="comment">   INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM</span></div>
<div class="line"><span class="comment">   LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE</span></div>
<div class="line"><span class="comment">   OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR</span></div>
<div class="line"><span class="comment">   PERFORMANCE OF THIS SOFTWARE.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">  ==============================================================================</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">namespace </span><a class="code" href="namespaceroli.html">roli</a></div>
<div class="line">{</div>
<div class="line"> </div>
<div class="line"><a class="code" href="structBitmapLEDProgram.html#ad6a66bb38167081be419fbdf03bfed90">BitmapLEDProgram::BitmapLEDProgram</a> (<a class="code" href="classBlock.html">Block</a>&amp; b)  : Program (b) {}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">    The heap format for this program is just an array of 15x15 5:6:5 colours,</span></div>
<div class="line"><span class="comment">    and the program just copies them onto the screen each frame.</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a class="code" href="structBitmapLEDProgram.html#adf520f46797d6ea4ccaaaf62d3e7e7e4">BitmapLEDProgram::setLED</a> (<a class="code" href="namespacelittlefoot.html#a417dab5137c6d4ff4e23303f84099aa9">juce::uint32</a> x, <a class="code" href="namespacelittlefoot.html#a417dab5137c6d4ff4e23303f84099aa9">juce::uint32</a> y, <a class="code" href="structLEDColour.html">LEDColour</a> colour)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (<span class="keyword">auto</span> ledGrid = <a class="code" href="structBlock_1_1Program.html#a2b39067fad835a24a04776556cc5a972">block</a>.<a class="code" href="classBlock.html#a6b5061298a0a23598edc5c204ff0458c">getLEDGrid</a>())</div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">auto</span> w = (<a class="code" href="namespacelittlefoot.html#a417dab5137c6d4ff4e23303f84099aa9">juce::uint32</a>) ledGrid-&gt;getNumColumns();</div>
<div class="line">        <span class="keyword">auto</span> h = (<a class="code" href="namespacelittlefoot.html#a417dab5137c6d4ff4e23303f84099aa9">juce::uint32</a>) ledGrid-&gt;getNumRows();</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (x &lt; w &amp;&amp; y &lt; h)</div>
<div class="line">        {</div>
<div class="line">            <span class="keyword">auto</span> bit = (x + y * w) * 16;</div>
<div class="line"> </div>
<div class="line">            <a class="code" href="structBlock_1_1Program.html#a2b39067fad835a24a04776556cc5a972">block</a>.<a class="code" href="classBlock.html#a5b13e1b2a93b1c254857df61afa208da">setDataBits</a> (bit,      5, (<a class="code" href="namespacelittlefoot.html#a417dab5137c6d4ff4e23303f84099aa9">juce::uint32</a>) (colour.<a class="code" href="structLEDColour.html#a4c57da9f839cd31e513fa062e601ff7a">getRed</a>()   &gt;&gt; 3));</div>
<div class="line">            <a class="code" href="structBlock_1_1Program.html#a2b39067fad835a24a04776556cc5a972">block</a>.<a class="code" href="classBlock.html#a5b13e1b2a93b1c254857df61afa208da">setDataBits</a> (bit + 5,  6, (<a class="code" href="namespacelittlefoot.html#a417dab5137c6d4ff4e23303f84099aa9">juce::uint32</a>) (colour.<a class="code" href="structLEDColour.html#abe80e1cf87b1c8c01fe2f842b4bd4f0b">getGreen</a>() &gt;&gt; 2));</div>
<div class="line">            <a class="code" href="structBlock_1_1Program.html#a2b39067fad835a24a04776556cc5a972">block</a>.<a class="code" href="classBlock.html#a5b13e1b2a93b1c254857df61afa208da">setDataBits</a> (bit + 11, 5, (<a class="code" href="namespacelittlefoot.html#a417dab5137c6d4ff4e23303f84099aa9">juce::uint32</a>) (colour.<a class="code" href="structLEDColour.html#a1fee4423dcdee77be0a54055f89d5f5a">getBlue</a>()  &gt;&gt; 3));</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        jassertfalse;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">juce::String BitmapLEDProgram::getLittleFootProgram()</div>
<div class="line">{</div>
<div class="line">    juce::String program (R<span class="stringliteral">&quot;littlefoot(</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    #heapsize: 15 * 15 * 2</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    void repaint()</span></div>
<div class="line"><span class="stringliteral">    {</span></div>
<div class="line"><span class="stringliteral">        for (int y = 0; y &lt; NUM_ROWS; ++y)</span></div>
<div class="line"><span class="stringliteral">        {</span></div>
<div class="line"><span class="stringliteral">            for (int x = 0; x &lt; NUM_COLUMNS; ++x)</span></div>
<div class="line"><span class="stringliteral">            {</span></div>
<div class="line"><span class="stringliteral">                int bit = (x + y * NUM_COLUMNS) * 16;</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">                fillPixel (makeARGB (255,</span></div>
<div class="line"><span class="stringliteral">                                     getHeapBits (bit,      5) &lt;&lt; 3,</span></div>
<div class="line"><span class="stringliteral">                                     getHeapBits (bit + 5,  6) &lt;&lt; 2,</span></div>
<div class="line"><span class="stringliteral">                                     getHeapBits (bit + 11, 5) &lt;&lt; 3), x, y);</span></div>
<div class="line"><span class="stringliteral">            }</span></div>
<div class="line"><span class="stringliteral">        }</span></div>
<div class="line"><span class="stringliteral">    }</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    )littlefoot&quot;);</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    </span><span class="keywordflow">if</span> (<span class="keyword">auto</span> ledGrid = <a class="code" href="structBlock_1_1Program.html#a2b39067fad835a24a04776556cc5a972">block</a>.<a class="code" href="classBlock.html#a6b5061298a0a23598edc5c204ff0458c">getLEDGrid</a>())</div>
<div class="line">        <span class="keywordflow">return</span> program.replace (<span class="stringliteral">&quot;NUM_COLUMNS&quot;</span>, juce::String (ledGrid-&gt;getNumColumns()))</div>
<div class="line">                      .replace (<span class="stringliteral">&quot;NUM_ROWS&quot;</span>,    juce::String (ledGrid-&gt;getNumRows()));</div>
<div class="line"> </div>
<div class="line">    jassertfalse;</div>
<div class="line">    <span class="keywordflow">return</span> {};</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">} <span class="comment">// namespace roli</span></div>
<div class="ttc" id="aclassBlock_html_a5b13e1b2a93b1c254857df61afa208da"><div class="ttname"><a href="classBlock.html#a5b13e1b2a93b1c254857df61afa208da">Block::setDataBits</a></div><div class="ttdeci">virtual void setDataBits(juce::uint32 startBit, juce::uint32 numBits, juce::uint32 value)=0</div><div class="ttdoc">Sets multiple bits on the littlefoot heap.</div></div>
<div class="ttc" id="aclassBlock_html_a6b5061298a0a23598edc5c204ff0458c"><div class="ttname"><a href="classBlock.html#a6b5061298a0a23598edc5c204ff0458c">Block::getLEDGrid</a></div><div class="ttdeci">virtual LEDGrid * getLEDGrid() const =0</div><div class="ttdoc">If this block has a grid of LEDs, this will return an object to control it.</div></div>
<div class="ttc" id="astructBitmapLEDProgram_html_ad6a66bb38167081be419fbdf03bfed90"><div class="ttname"><a href="structBitmapLEDProgram.html#ad6a66bb38167081be419fbdf03bfed90">BitmapLEDProgram::BitmapLEDProgram</a></div><div class="ttdeci">BitmapLEDProgram(Block &amp;)</div></div>
<div class="ttc" id="astructBitmapLEDProgram_html_adf520f46797d6ea4ccaaaf62d3e7e7e4"><div class="ttname"><a href="structBitmapLEDProgram.html#adf520f46797d6ea4ccaaaf62d3e7e7e4">BitmapLEDProgram::setLED</a></div><div class="ttdeci">void setLED(juce::uint32 x, juce::uint32 y, LEDColour)</div><div class="ttdoc">Set the colour of the LED at coordinates {x, y}.</div></div>
<div class="ttc" id="astructBlock_1_1Program_html_a2b39067fad835a24a04776556cc5a972"><div class="ttname"><a href="structBlock_1_1Program.html#a2b39067fad835a24a04776556cc5a972">Block::Program::block</a></div><div class="ttdeci">Block &amp; block</div><div class="ttdef"><b>Definition:</b> roli_Block.h:252</div></div>
<div class="ttc" id="astructLEDColour_html_a1fee4423dcdee77be0a54055f89d5f5a"><div class="ttname"><a href="structLEDColour.html#a1fee4423dcdee77be0a54055f89d5f5a">LEDColour::getBlue</a></div><div class="ttdeci">juce::uint8 getBlue() const noexcept</div><div class="ttdef"><b>Definition:</b> roli_LEDGrid.h:44</div></div>
<div class="ttc" id="astructLEDColour_html_a4c57da9f839cd31e513fa062e601ff7a"><div class="ttname"><a href="structLEDColour.html#a4c57da9f839cd31e513fa062e601ff7a">LEDColour::getRed</a></div><div class="ttdeci">juce::uint8 getRed() const noexcept</div><div class="ttdef"><b>Definition:</b> roli_LEDGrid.h:42</div></div>
<div class="ttc" id="astructLEDColour_html_abe80e1cf87b1c8c01fe2f842b4bd4f0b"><div class="ttname"><a href="structLEDColour.html#abe80e1cf87b1c8c01fe2f842b4bd4f0b">LEDColour::getGreen</a></div><div class="ttdeci">juce::uint8 getGreen() const noexcept</div><div class="ttdef"><b>Definition:</b> roli_LEDGrid.h:43</div></div>
</div><!-- fragment --><p>The <a class="el" href="group__LittleFootFunctions.html#gac827b978aa122f136a14c198687ad80f" title="Use this method to draw the display.">repaint()</a> method of the LittleFoot program is called at approximately 25 Hz, and each time it simply inspects the heap (the shared area of memory used to communicate between your application code and your LittleFoot program) and sets the LEDs based on the heap's content. To update the heap, and hence the LEDs, your application code calls <a class="el" href="structBitmapLEDProgram.html#adf520f46797d6ea4ccaaaf62d3e7e7e4" title="Set the colour of the LED at coordinates {x, y}.">BitmapLEDProgram::setLED()</a>.</p>
<p>A more advanced example can be found in the source code of the <a class="el" href="structDrumPadGridProgram.html">DrumPadGridProgram</a> class or in the <a class="el" href="example_blocks_synth.html">BlocksSynth</a> example. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<hr class="footer"/>
<address class="footer"><small>All content &copy ROLI Ltd.</small></address><br/>
</body>
</html>
